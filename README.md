# irremote-translator
Allows your TV IR remote to control other devices like Audio Amplifier that are equipped with the 3.5mm IR repeater/extender port. Imagine you can turn the volume up or down using your TV remote and the amplifier will have the volume adjusted accordingly. This project is an alternative to the universal remote (that some people - like me - don't like very much). You can record up to 16 codes.




## Installation and Use ##
Device translates IR remote codes on-the-fly to the previosuly recorded codes and sends translated IR codes over the 3.5mm jack IR repeater port. Device has buttons and LEDs enable and indicate the IR code recording session. When button is pressed - recording starts. If the button is pressed again and the IR codes were not recorded, the recordng stops and the recording is canceled. 

* IR phototransistor on pin D2
* IR repeater on pin D3

To use the device you'd need to supply power with the 5v miniUSB cable and connect the 3.5mm output port using audio 3.5mm cable to the IR remote repeater input port of your audio equipment


### Initial Setup ###
When powered, system indicates if any pre-recorded IR codes were found. If not, you'd need to press "IRCODE RECORD" button (pin D12). It will initiate 2-stage recording. System gives you the recording feedback with the RECORD_1 and RECORD_2 LEDs:

* RECORD_1 LED lights up when the first remote controller code is to be recorded
* RECORD_2 LED lights up when the second remote controller code (translation) is to be recorded
* both LEDs will be lit upon initiation of the device after startup if the codes were not recorded at all ( new device)

*Example:* to allow the volume of the audio amplifier to be changed when the TV audio volume is adjusted you'd record first the VOLUME UP tv remote code and next the VOLIME UP of the audio amplifier remote. NExt you'd record the VOLUME DOWN the same way. After the codes were recorded the device will be able to translate the tv codes to amplifier ir codes immediately. 

### Typical Use ###
Once connected and when the codes were recorded



## Arduino ##
The board used is the Arduino Nano and the libraries:
* State Machine was implemented with *arduino_fsm* state machine library https://github.com/jonblack/arduino-fsm. This project however uses my fork of the library to allow timed transitions reset: https://github.com/stellarshenson/arduino-fsm. Pull was already requested from the *arduino-fsm* owner, hopefully my fork will be merged soon
* IR code recording and sending was implemented with *IRRemote* library https://github.com/z3t0/Arduino-IRremote


## State Machine ##
Diagram was generated by http://asciiflow.com/

	             +----------------------+
	             | state_ircodes_record |
	             +---------+--------+---+
	                       ^        |
	TRIGGER_IRCODES_RECORD |        | TRIGGER_IRCODES_RECORDED
	                       |        v
	             +---------+--------+--+
	             | state_ircode_sense  +
	             +---------------------+
	                           


### state_ircodes_record ###

### state_ircode_sense ###

## Circuit and PCB ##
![breadboard](https://github.com/stellarshenson/audio-detector/blob/master/audio-detector_bb.jpg)

